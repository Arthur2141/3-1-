//
// Generated by Microsoft (R) HLSL Shader Compiler 10.1
//
//
// Buffer Definitions: 
//
// cbuffer CbScene
// {
//
//   row_major float4x4 viewProjection; // Offset:    0 Size:    64 [unused]
//   float4 lightDirection;             // Offset:   64 Size:    16
//   float4 viewPosition;               // Offset:   80 Size:    16
//   row_major float4x4 shadowViewProjection;// Offset:   96 Size:    64
//
// }
//
//
// Resource Bindings:
//
// Name                                 Type  Format         Dim      HLSL Bind  Count
// ------------------------------ ---------- ------- ----------- -------------- ------
// diffuseMapSamplerState            sampler      NA          NA             s0      1 
// shadowMapSamplerState             sampler      NA          NA             s2      1 
// diffuseMap                        texture  float4          2d             t0      1 
// rampTexture                       texture  float4          2d             t1      1 
// shadowMap                         texture  float4          2d             t2      1 
// CbScene                           cbuffer      NA          NA            cb0      1 
//
//
//
// Input signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_POSITION              0   xyzw        0      POS   float       
// TEXCOORD                 0   xy          1     NONE   float   xy  
// COLOR                    0   xyzw        2     NONE   float   xyz 
// POSITION                 0   xyzw        3     NONE   float   xyz 
// NORMAL                   0   xyzw        4     NONE   float   xyz 
//
//
// Output signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_TARGET                0   xyzw        0   TARGET   float   xyzw
//
ps_5_0
dcl_globalFlags refactoringAllowed | skipOptimization
dcl_constantbuffer CB0[10], immediateIndexed
dcl_sampler s0, mode_default
dcl_sampler s2, mode_default
dcl_resource_texture2d (float,float,float,float) t0
dcl_resource_texture2d (float,float,float,float) t1
dcl_resource_texture2d (float,float,float,float) t2
dcl_input_ps linear v1.xy
dcl_input_ps linear v2.xyz
dcl_input_ps linear v3.xyz
dcl_input_ps linear v4.xyz
dcl_output o0.xyzw
dcl_temps 8
//
// Initial variable locations:
//   v0.x <- pin.position.x; v0.y <- pin.position.y; v0.z <- pin.position.z; v0.w <- pin.position.w; 
//   v1.x <- pin.texcoord.x; v1.y <- pin.texcoord.y; 
//   v2.x <- pin.color.x; v2.y <- pin.color.y; v2.z <- pin.color.z; v2.w <- pin.color.w; 
//   v3.x <- pin.wposition.x; v3.y <- pin.wposition.y; v3.z <- pin.wposition.z; v3.w <- pin.wposition.w; 
//   v4.x <- pin.wnormal.x; v4.y <- pin.wnormal.y; v4.z <- pin.wnormal.z; v4.w <- pin.wnormal.w; 
//   o0.x <- <main return value>.x; o0.y <- <main return value>.y; o0.z <- <main return value>.z; o0.w <- <main return value>.w
//
#line 42 "C:\Users\2230273\OneDrive - yamaguchigakuen\デスクトップ\ゲームプログラミング\ゲームプログラミングⅢ・Ⅳ(20231204)Particle\HLSL\Toon.hlsli"
mov r0.x, l(0.000300)  // r0.x <- Bias

#line 43
mov r0.yzw, l(0,0.700000,0.700000,0.700000)  // r0.y <- ShadowColor.x; r0.z <- ShadowColor.y; r0.w <- ShadowColor.z

#line 15 "C:\Users\2230273\OneDrive - yamaguchigakuen\チEクトップ\ゲームプログラミング\ゲームプログラミングⅢ・Ⅳ(20231204)Particle\HLSL\ToonPS.hlsl"
sample_indexable(texture2d)(float,float,float,float) r1.xyzw, v1.xyxx, t0.xyzw, s0  // r1.x <- color.x; r1.y <- color.y; r1.z <- color.z; r1.w <- color.w

#line 18
mov r2.xyz, v3.xyzx  // r2.x <- P.x; r2.y <- P.y; r2.z <- P.z

#line 19
dp3 r3.x, v4.xyzx, v4.xyzx
rsq r3.x, r3.x
mul r3.xyz, r3.xxxx, v4.xyzx  // r3.x <- N.x; r3.y <- N.y; r3.z <- N.z

#line 20
dp3 r3.w, cb0[4].xyzx, cb0[4].xyzx
rsq r3.w, r3.w
mul r4.xyz, r3.wwww, cb0[4].xyzx  // r4.x <- L.x; r4.y <- L.y; r4.z <- L.z

#line 22
mov r5.xyz, -r2.xyzx
add r5.xyz, r5.xyzx, cb0[5].xyzx
dp3 r3.w, r5.xyzx, r5.xyzx
rsq r3.w, r3.w
mul r5.xyz, r3.wwww, r5.xyzx  // r5.x <- E.x; r5.y <- E.y; r5.z <- E.z

#line 27
mov r6.xyz, l(0.400000,0.400000,0.400000,0)  // r6.x <- A.x; r6.y <- A.y; r6.z <- A.z

#line 34
mov r7.xyz, -r4.xyzx
dp3 r3.w, r7.xyzx, r3.xyzx
mul r3.w, r3.w, l(0.500000)
add r7.x, r3.w, l(0.500000)  // r7.x <- U

#line 35
itof r7.y, l(1)
sample_indexable(texture2d)(float,float,float,float) r7.xyz, r7.xyxx, t1.xyzw, s0
mov r7.xyz, r7.xyzx  // r7.x <- D.x; r7.y <- D.y; r7.z <- D.z

#line 42
dp3 r3.w, r4.xyzx, r3.xyzx
add r3.w, r3.w, r3.w
mov r3.w, -r3.w
mul r3.xyz, r3.wwww, r3.xyzx
add r3.xyz, r4.xyzx, r3.xyzx
dp3 r3.w, r3.xyzx, r3.xyzx
rsq r3.w, r3.w
mul r3.xyz, r3.wwww, r3.xyzx
dp3 r3.x, r3.xyzx, r5.xyzx  // r3.x <- U

#line 43
itof r3.y, l(1)
sample_indexable(texture2d)(float,float,float,float) r3.xyz, r3.xyxx, t1.xyzw, s0
mov r3.xyz, r3.xyzx  // r3.x <- S.x; r3.y <- S.y; r3.z <- S.z

#line 44
max r3.xyz, r3.xyzx, l(0.000000, 0.000000, 0.000000, 0.000000)
min r3.xyz, r3.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)
mov r4.xyz, l(1.000000,1.000000,1.000000,0)
mul r3.xyz, r3.xyzx, r3.xyzx
mul r3.xyz, r3.xyzx, r3.xyzx
mul r4.xyz, r3.xyzx, r4.xyzx
mul r3.xyz, r3.xyzx, r3.xyzx
mul r3.xyz, r3.xyzx, r3.xyzx
mul r3.xyz, r3.xyzx, r4.xyzx
mul r3.xyz, r3.xyzx, l(0.900000, 0.900000, 0.900000, 0.000000)

#line 47
add r4.xyz, r6.xyzx, r7.xyzx
add r3.xyz, r3.xyzx, r4.xyzx
mul r1.xyz, r1.xyzx, r3.xyzx

#line 50
mul r1.xyz, r1.xyzx, v2.xyzx

#line 52
nop 
mov r3.x, cb0[6].x
mov r4.x, cb0[6].y
mov r5.x, cb0[6].z
mov r6.x, cb0[6].w
mov r3.y, cb0[7].x
mov r4.y, cb0[7].y
mov r5.y, cb0[7].z
mov r6.y, cb0[7].w
mov r3.z, cb0[8].x
mov r4.z, cb0[8].y
mov r5.z, cb0[8].z
mov r6.z, cb0[8].w
mov r7.xyzw, cb0[9].xyzw
mov r2.xyz, r2.xyzx

#line 51 "C:\Users\2230273\OneDrive - yamaguchigakuen\デスクトップ\ゲームプログラミング\ゲームプログラミングⅢ・Ⅳ(20231204)Particle\HLSL\Toon.hlsli"
mov r2.xyz, r2.xyzx  // r2.x <- wvpPos.x; r2.y <- wvpPos.y; r2.z <- wvpPos.z

#line 52
itof r2.w, l(1)  // r2.w <- wvpPos.w

#line 53
mov r3.w, r7.x
dp4 r3.x, r2.xyzw, r3.xyzw  // r3.x <- wvpPos.x
mov r4.w, r7.y
dp4 r3.y, r2.xyzw, r4.xyzw  // r3.y <- wvpPos.y
mov r5.w, r7.z
dp4 r3.z, r2.xyzw, r5.xyzw  // r3.z <- wvpPos.z
mov r6.w, r7.w
dp4 r2.x, r2.xyzw, r6.xyzw  // r2.x <- wvpPos.w

#line 55
div r2.xyz, r3.xyzx, r2.xxxx  // r2.x <- wvpPos.x; r2.y <- wvpPos.y; r2.z <- wvpPos.z

#line 57
mov r2.w, -r2.y  // r2.w <- wvpPos.y

#line 58
mul r3.xy, r2.xwxx, l(0.500000, 0.500000, 0.000000, 0.000000)
add r2.xy, r3.xyxx, l(0.500000, 0.500000, 0.000000, 0.000000)  // r2.y <- wvpPos.y

#line 59
mov r2.xy, r2.xyxx  // r2.x <- <GetShadowTex return value>.x; r2.y <- <GetShadowTex return value>.y
mov r2.z, r2.z  // r2.z <- <GetShadowTex return value>.z

#line 52 "C:\Users\2230273\OneDrive - yamaguchigakuen\チEクトップ\ゲームプログラミング\ゲームプログラミングⅢ・Ⅳ(20231204)Particle\HLSL\ToonPS.hlsl"
mov r2.xyz, r2.xyzx  // r2.x <- tex.x; r2.y <- tex.y; r2.z <- tex.z

#line 53
nop 
nop 
nop 
mov r2.xyz, r2.xyzx
mov r0.yzw, r0.yyzw
mov r0.x, r0.x

#line 65 "C:\Users\2230273\OneDrive - yamaguchigakuen\デスクトップ\ゲームプログラミング\ゲームプログラミングⅢ・Ⅳ(20231204)Particle\HLSL\Toon.hlsli"
sample_indexable(texture2d)(float,float,float,float) r2.x, r2.xyxx, t2.xyzw, s2
mov r2.x, r2.x  // r2.x <- d

#line 67
mov r2.x, -r2.x
add r2.x, r2.x, r2.z
lt r0.x, r0.x, r2.x
itof r2.xyz, l(1, 1, 1, 0)
movc r0.xyz, r0.xxxx, r0.yzwy, r2.xyzx  // r0.x <- Scolor.x; r0.y <- Scolor.y; r0.z <- Scolor.z

#line 68
mov r0.xyz, r0.xyzx  // r0.x <- <GetShadow return value>.x; r0.y <- <GetShadow return value>.y; r0.z <- <GetShadow return value>.z

#line 53 "C:\Users\2230273\OneDrive - yamaguchigakuen\チEクトップ\ゲームプログラミング\ゲームプログラミングⅢ・Ⅳ(20231204)Particle\HLSL\ToonPS.hlsl"
mov r0.xyz, r0.xyzx  // r0.x <- shadowColor.x; r0.y <- shadowColor.y; r0.z <- shadowColor.z

#line 56
mul r0.xyz, r0.xyzx, r1.xyzx  // r0.x <- color.x; r0.y <- color.y; r0.z <- color.z

#line 58
mov o0.xyz, r0.xyzx
mov o0.w, r1.w
ret 
// Approximately 100 instruction slots used
