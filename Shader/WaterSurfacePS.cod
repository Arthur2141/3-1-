//
// Generated by Microsoft (R) HLSL Shader Compiler 10.1
//
//
// Buffer Definitions: 
//
// cbuffer CbScene
// {
//
//   row_major float4x4 viewProjection; // Offset:    0 Size:    64 [unused]
//   float4 lightDirection;             // Offset:   64 Size:    16
//   float4 viewPosition;               // Offset:   80 Size:    16
//   row_major float4x4 shadowViewProjection;// Offset:   96 Size:    64
//   float4 param;                      // Offset:  160 Size:    16
//   row_major float4x4 reflectViewProjection;// Offset:  176 Size:    64
//
// }
//
//
// Resource Bindings:
//
// Name                                 Type  Format         Dim      HLSL Bind  Count
// ------------------------------ ---------- ------- ----------- -------------- ------
// diffuseMapSamplerState            sampler      NA          NA             s0      1 
// shadowMapSamplerState             sampler      NA          NA             s1      1 
// diffuseMap                        texture  float4          2d             t0      1 
// shadowMap                         texture  float4          2d             t1      1 
// EnvMap                            texture  float4          2d             t2      1 
// ReflectMap                        texture  float4          2d             t3      1 
// CbScene                           cbuffer      NA          NA            cb0      1 
//
//
//
// Input signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_POSITION              0   xyzw        0      POS   float       
// POSITION                 0   xyz         1     NONE   float   xyz 
// NORMAL                   0   xyz         2     NONE   float   xyz 
// TEXCOORD                 0   xy          3     NONE   float   xy  
// COLOR                    0   xyzw        4     NONE   float       
//
//
// Output signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_TARGET                0   xyzw        0   TARGET   float   xyzw
//
ps_5_0
dcl_globalFlags refactoringAllowed | skipOptimization
dcl_constantbuffer CB0[15], immediateIndexed
dcl_sampler s0, mode_default
dcl_sampler s1, mode_default
dcl_resource_texture2d (float,float,float,float) t0
dcl_resource_texture2d (float,float,float,float) t1
dcl_resource_texture2d (float,float,float,float) t2
dcl_resource_texture2d (float,float,float,float) t3
dcl_input_ps linear v1.xyz
dcl_input_ps linear v2.xyz
dcl_input_ps linear v3.xy
dcl_output o0.xyzw
dcl_temps 12
dcl_indexableTemp x0[2], 4
dcl_indexableTemp x1[2], 4
//
// Initial variable locations:
//   v0.x <- pin.position.x; v0.y <- pin.position.y; v0.z <- pin.position.z; v0.w <- pin.position.w; 
//   v1.x <- pin.wposition.x; v1.y <- pin.wposition.y; v1.z <- pin.wposition.z; 
//   v2.x <- pin.wnomal.x; v2.y <- pin.wnomal.y; v2.z <- pin.wnomal.z; 
//   v3.x <- pin.texcoord.x; v3.y <- pin.texcoord.y; 
//   v4.x <- pin.color.x; v4.y <- pin.color.y; v4.z <- pin.color.z; v4.w <- pin.color.w; 
//   o0.x <- <main return value>.x; o0.y <- <main return value>.y; o0.z <- <main return value>.z; o0.w <- <main return value>.w; 
//   x0 <- speeds; x1 <- wave_size
//
#line 32 "C:\Users\2230273\OneDrive - yamaguchigakuen\デスクトップ\ゲームプログラミング\ゲームプログラミングⅢ・Ⅳ(20231204)Particle\HLSL\WaterSurface.hlsli"
mov r0.xyz, l(0.900000,0.900000,0.900000,0)  // r0.x <- Scolor.x; r0.y <- Scolor.y; r0.z <- Scolor.z

#line 33
mov r0.w, l(0.000800)  // r0.w <- Bias

#line 34
mov r1.x, l(3.141593)  // r1.x <- PI

#line 14 "C:\Users\2230273\OneDrive - yamaguchigakuen\チEクトップ\ゲームプログラミング\ゲームプログラミングⅢ・Ⅳ(20231204)Particle\HLSL\WaterSurfacePS.hlsl"
mov r2.xyz, v1.xyzx  // r2.x <- P.x; r2.y <- P.y; r2.z <- P.z

#line 15
mov r1.yzw, -r2.xxyz
add r1.yzw, r1.yyzw, cb0[5].xxyz
dp3 r3.x, r1.yzwy, r1.yzwy
rsq r3.x, r3.x
mul r1.yzw, r1.yyzw, r3.xxxx  // r1.y <- E.x; r1.z <- E.y; r1.w <- E.z

#line 16
dp3 r3.x, cb0[4].xyzx, cb0[4].xyzx
rsq r3.x, r3.x
mul r3.xyz, r3.xxxx, cb0[4].xyzx  // r3.x <- L.x; r3.y <- L.y; r3.z <- L.z

#line 17
dp3 r3.w, v2.xyzx, v2.xyzx
rsq r3.w, r3.w
mul r4.xyz, r3.wwww, v2.xyzx  // r4.x <- N.x; r4.y <- N.y; r4.z <- N.z

#line 20
mov r5.xyz, -r1.yzwy
dp3 r3.w, r5.xyzx, r4.xyzx
add r3.w, r3.w, r3.w
mov r3.w, -r3.w
mul r6.xyz, r3.wwww, r4.xyzx
add r5.xyz, r5.xyzx, r6.xyzx
dp3 r3.w, r5.xyzx, r5.xyzx
rsq r3.w, r3.w
mul r5.xyz, r3.wwww, r5.xyzx  // r5.x <- RE.x; r5.y <- RE.y; r5.z <- RE.z

#line 23
mov r3.w, -r5.z
max r3.w, r3.w, r5.z
mov r4.w, -r5.x
max r5.w, r4.w, r5.x
min r6.x, r3.w, r5.w
max r6.y, r3.w, r5.w
div r6.y, l(1.000000, 1.000000, 1.000000, 1.000000), r6.y
mul r6.x, r6.y, r6.x
mul r6.y, r6.x, r6.x
mul r6.z, r6.y, l(0.020835)
add r6.z, r6.z, l(-0.085133)
mul r6.z, r6.z, r6.y
add r6.z, r6.z, l(0.180141)
mul r6.z, r6.z, r6.y
add r6.z, r6.z, l(-0.330299)
mul r6.y, r6.z, r6.y
add r6.y, r6.y, l(0.999866)
mul r6.x, r6.y, r6.x
lt r3.w, r5.w, r3.w
mul r5.w, r6.x, l(-2.000000)
add r5.w, r5.w, l(1.570796)
and r3.w, r3.w, r5.w
add r3.w, r6.x, r3.w
lt r4.w, r5.x, r4.w
and r4.w, r4.w, l(0xc0490fdb)
add r3.w, r3.w, r4.w
min r4.w, r5.x, r5.z
max r5.w, r5.x, r5.z
mov r6.x, -r4.w
lt r4.w, r4.w, r6.x
mov r6.x, -r5.w
ge r5.w, r5.w, r6.x
and r4.w, r4.w, r5.w
mov r5.w, -r3.w
movc r3.w, r4.w, r5.w, r3.w
div r3.w, r3.w, l(2.000000)
mov r3.w, -r3.w
add r6.x, r3.w, l(1.000000)  // r6.x <- texcoord.x
dp2 r3.w, r5.xzxx, r5.xzxx
sqrt r3.w, r3.w
mov r4.w, -r5.y
max r4.w, r4.w, r5.y
mov r5.x, -r3.w
max r5.z, r3.w, r5.x
min r5.w, r4.w, r5.z
max r6.z, r4.w, r5.z
div r6.z, l(1.000000, 1.000000, 1.000000, 1.000000), r6.z
mul r5.w, r5.w, r6.z
mul r6.z, r5.w, r5.w
mul r6.w, r6.z, l(0.020835)
add r6.w, r6.w, l(-0.085133)
mul r6.w, r6.w, r6.z
add r6.w, r6.w, l(0.180141)
mul r6.w, r6.w, r6.z
add r6.w, r6.w, l(-0.330299)
mul r6.z, r6.w, r6.z
add r6.z, r6.z, l(0.999866)
mul r5.w, r5.w, r6.z
lt r4.w, r5.z, r4.w
mul r5.z, r5.w, l(-2.000000)
add r5.z, r5.z, l(1.570796)
and r4.w, r4.w, r5.z
add r4.w, r5.w, r4.w
lt r5.x, r3.w, r5.x
and r5.x, r5.x, l(0xc0490fdb)
add r4.w, r4.w, r5.x
min r5.x, r3.w, r5.y
max r3.w, r3.w, r5.y
mov r5.y, -r5.x
lt r5.x, r5.x, r5.y
mov r5.y, -r3.w
ge r3.w, r3.w, r5.y
and r3.w, r3.w, r5.x
mov r5.x, -r4.w
movc r3.w, r3.w, r5.x, r4.w
mov r6.y, -r3.w  // r6.y <- texcoord.y

#line 24
div r5.xy, r6.xyxx, r1.xxxx
add r5.xy, r5.xyxx, l(0.500000, 0.500000, 0.000000, 0.000000)  // r5.x <- texcoord.x; r5.y <- texcoord.y

#line 28
mov x0[0].xy, l(0.002000,0.001000,0,0)
mov x0[1].xy, l(-0.001000,0.002000,0,0)

#line 33
mov x1[0].x, l(15.000000)
mov x1[1].x, l(15.000000)

#line 34
mov r1.x, l(0.010000)  // r1.x <- wave_influence

#line 40
mov r3.w, x0[0].x
mul r3.w, r3.w, cb0[10].x
add r6.x, r3.w, v3.x  // r6.x <- tex.x

#line 41
mov r3.w, x0[0].y
mul r3.w, r3.w, cb0[10].x
add r6.y, r3.w, v3.y  // r6.y <- tex.y

#line 42
mov r3.w, x1[0].x
mul r5.zw, r3.wwww, r6.xxxy
sample_indexable(texture2d)(float,float,float,float) r6.xyz, r5.zwzz, t0.xyzw, s0
mov r6.xyz, r6.xyzx  // r6.x <- temp0.x; r6.y <- temp0.y; r6.z <- temp0.z

#line 43
mov r7.xyz, l(-0.500000,-0.500000,-0.500000,-0.000000)
add r6.xyz, r6.xyzx, r7.xyzx
mul r6.xyz, r6.xyzx, l(2.000000, 2.000000, 2.000000, 0.000000)

#line 45
mov r3.w, x0[1].x
mul r3.w, r3.w, cb0[10].x
add r7.x, r3.w, v3.x  // r7.x <- tex.x

#line 46
mov r3.w, x0[1].y
mul r3.w, r3.w, cb0[10].x
add r7.y, r3.w, v3.y  // r7.y <- tex.y

#line 47
mov r3.w, x1[1].x
mul r5.zw, r3.wwww, r7.xxxy
sample_indexable(texture2d)(float,float,float,float) r7.xyz, r5.zwzz, t0.xyzw, s0
mov r7.xyz, r7.xyzx  // r7.x <- temp1.x; r7.y <- temp1.y; r7.z <- temp1.z

#line 48
mov r8.xyz, l(-0.500000,-0.500000,-0.500000,-0.000000)
add r7.xyz, r7.xyzx, r8.xyzx
mul r7.xyz, r7.xyzx, l(2.000000, 2.000000, 2.000000, 0.000000)

#line 50
add r6.xyz, r6.xyzx, r7.xyzx
dp3 r3.w, r6.xyzx, r6.xyzx
rsq r3.w, r3.w
mul r6.xyz, r3.wwww, r6.xzyx  // r6.x <- temp1.x; r6.y <- temp1.z; r6.z <- temp1.y

#line 52
mov r6.x, r6.x  // r6.x <- normal.x

#line 53
mov r6.y, r6.y  // r6.y <- normal.y

#line 54
mov r6.z, r6.z  // r6.z <- normal.z

#line 62
mul r5.zw, r1.xxxx, r6.xxxz
add r5.xy, r5.zwzz, r5.xyxx
sample_indexable(texture2d)(float,float,float,float) r5.xyz, r5.xyxx, t2.xyzw, s0
mov r5.xyz, r5.xyzx  // r5.x <- envColor.x; r5.y <- envColor.y; r5.z <- envColor.z

#line 66
dp3 r3.w, r1.yzwy, r6.xyzx
mov r3.w, -r3.w
add r3.w, r3.w, l(1.000000)
max r3.w, r3.w, l(0.000000)
min r7.w, r3.w, l(1.000000)  // r7.w <- alpha

#line 67
mov r7.w, r7.w  // r7.w <- color.w

#line 68
mul r5.xyz, r5.xyzx, l(0.800000, 0.800000, 0.800000, 0.000000)
mul r7.xyz, r7.wwww, r5.xyzx  // r7.x <- color.x; r7.y <- color.y; r7.z <- color.z

#line 71
mov r5.xyz, -r3.xyzx
dp3 r3.w, r5.xyzx, r4.xyzx
itof r4.x, l(0)
lt r3.w, r4.x, r3.w
if_nz r3.w

#line 73
  nop 
  mov r4.x, cb0[6].x
  mov r5.x, cb0[6].y
  mov r8.x, cb0[6].z
  mov r9.x, cb0[6].w
  mov r4.y, cb0[7].x
  mov r5.y, cb0[7].y
  mov r8.y, cb0[7].z
  mov r9.y, cb0[7].w
  mov r4.z, cb0[8].x
  mov r5.z, cb0[8].y
  mov r8.z, cb0[8].z
  mov r9.z, cb0[8].w
  mov r10.xyzw, cb0[9].xyzw
  mov r11.xyz, r2.xyzx

#line 42 "C:\Users\2230273\OneDrive - yamaguchigakuen\デスクトップ\ゲームプログラミング\ゲームプログラミングⅢ・Ⅳ(20231204)Particle\HLSL\WaterSurface.hlsli"
  mov r11.xyz, r11.xyzx  // r11.x <- wvpPos.x; r11.y <- wvpPos.y; r11.z <- wvpPos.z

#line 43
  itof r11.w, l(1)  // r11.w <- wvpPos.w

#line 44
  mov r4.w, r10.x
  dp4 r4.x, r11.xyzw, r4.xyzw  // r4.x <- wvpPos.x
  mov r5.w, r10.y
  dp4 r4.y, r11.xyzw, r5.xyzw  // r4.y <- wvpPos.y
  mov r8.w, r10.z
  dp4 r4.z, r11.xyzw, r8.xyzw  // r4.z <- wvpPos.z
  mov r9.w, r10.w
  dp4 r3.w, r11.xyzw, r9.xyzw  // r3.w <- wvpPos.w

#line 45
  div r4.xyz, r4.xyzx, r3.wwww

#line 48
  mov r4.w, -r4.y  // r4.w <- wvpPos.y

#line 49
  mul r5.xy, r4.xwxx, l(0.500000, 0.500000, 0.000000, 0.000000)
  add r4.xy, r5.xyxx, l(0.500000, 0.500000, 0.000000, 0.000000)  // r4.y <- wvpPos.y

#line 50
  mov r4.xy, r4.xyxx  // r4.x <- <GetShadowTex return value>.x; r4.y <- <GetShadowTex return value>.y
  mov r4.z, r4.z  // r4.z <- <GetShadowTex return value>.z

#line 73 "C:\Users\2230273\OneDrive - yamaguchigakuen\チEクトップ\ゲームプログラミング\ゲームプログラミングⅢ・Ⅳ(20231204)Particle\HLSL\WaterSurfacePS.hlsl"
  mov r4.xyz, r4.xyzx  // r4.x <- wTex.x; r4.y <- wTex.y; r4.z <- wTex.z

#line 74
  nop 
  nop 
  nop 
  mov r4.xyz, r4.xyzx
  mov r0.xyz, r0.xyzx
  mov r0.w, r0.w

#line 60 "C:\Users\2230273\OneDrive - yamaguchigakuen\デスクトップ\ゲームプログラミング\ゲームプログラミングⅢ・Ⅳ(20231204)Particle\HLSL\WaterSurface.hlsli"
  sample_indexable(texture2d)(float,float,float,float) r3.w, r4.xyxx, t1.yzwx, s1  // r3.w <- d

#line 62
  mov r3.w, -r3.w
  add r3.w, r3.w, r4.z
  lt r0.w, r0.w, r3.w
  itof r4.xyz, l(1, 1, 1, 0)
  movc r0.xyz, r0.wwww, r0.xyzx, r4.xyzx

#line 63
  mov r0.xyz, r0.xyzx  // r0.x <- <GetShadow return value>.x; r0.y <- <GetShadow return value>.y; r0.z <- <GetShadow return value>.z

#line 74 "C:\Users\2230273\OneDrive - yamaguchigakuen\チEクトップ\ゲームプログラミング\ゲームプログラミングⅢ・Ⅳ(20231204)Particle\HLSL\WaterSurfacePS.hlsl"
  mov r0.xyz, r0.xyzx  // r0.x <- shadow_color.x; r0.y <- shadow_color.y; r0.z <- shadow_color.z

#line 76
  mul r7.xyz, r0.xyzx, r7.xyzx

#line 77
endif 

#line 80
nop 
mov r0.x, cb0[11].x
mov r4.x, cb0[11].y
mov r5.x, cb0[11].w
mov r0.y, cb0[12].x
mov r4.y, cb0[12].y
mov r5.y, cb0[12].w
mov r0.z, cb0[13].x
mov r4.z, cb0[13].y
mov r8.x, cb0[13].w
mov r8.yzw, cb0[14].xxyw
mov r2.xyz, r2.xyzx

#line 42 "C:\Users\2230273\OneDrive - yamaguchigakuen\デスクトップ\ゲームプログラミング\ゲームプログラミングⅢ・Ⅳ(20231204)Particle\HLSL\WaterSurface.hlsli"
mov r2.xyz, r2.xyzx  // r2.x <- wvpPos.x; r2.y <- wvpPos.y; r2.z <- wvpPos.z

#line 43
itof r2.w, l(1)  // r2.w <- wvpPos.w

#line 44
mov r0.w, r8.y
dp4 r0.x, r2.xyzw, r0.xyzw  // r0.x <- wvpPos.x
mov r4.w, r8.z
dp4 r0.y, r2.xyzw, r4.xyzw  // r0.y <- wvpPos.y
mov r5.zw, r8.xxxw
dp4 r0.z, r2.xyzw, r5.xyzw  // r0.z <- wvpPos.w

#line 45
div r0.xy, r0.xyxx, r0.zzzz

#line 48
mov r0.z, -r0.y  // r0.z <- wvpPos.y

#line 49
mul r0.xy, r0.xzxx, l(0.500000, 0.500000, 0.000000, 0.000000)
add r0.xy, r0.xyxx, l(0.500000, 0.500000, 0.000000, 0.000000)  // r0.x <- wvpPos.x; r0.y <- wvpPos.y

#line 50
mov r0.xy, r0.xyxx  // r0.x <- <GetShadowTex return value>.x; r0.y <- <GetShadowTex return value>.y

#line 80 "C:\Users\2230273\OneDrive - yamaguchigakuen\チEクトップ\ゲームプログラミング\ゲームプログラミングⅢ・Ⅳ(20231204)Particle\HLSL\WaterSurfacePS.hlsl"
mov r0.xy, r0.xyxx  // r0.x <- wTex.x; r0.y <- wTex.y

#line 82
mul r0.zw, r1.xxxx, r6.xxxz
mul r0.zw, r0.zzzw, l(0.000000, 0.000000, 1.000000, 1.000000)
add r0.xy, r0.zwzz, r0.xyxx
sample_indexable(texture2d)(float,float,float,float) r0.xyz, r0.xyxx, t3.xyzw, s0  // r0.x <- reflect_color.x; r0.y <- reflect_color.y; r0.z <- reflect_color.z

#line 85
dp3 r0.w, r0.xyzx, r0.xyzx
ne r0.w, r0.w, l(0.000000)
if_nz r0.w

#line 87
  mov r7.xyz, r0.xyzx

#line 88
endif 

#line 93
dp3 r0.x, r3.xyzx, r6.xyzx
add r0.x, r0.x, r0.x
mov r0.x, -r0.x
mul r0.xyz, r0.xxxx, r6.xyzx
add r0.xyz, r3.xyzx, r0.xyzx  // r0.x <- R.x; r0.y <- R.y; r0.z <- R.z

#line 94
itof r0.w, l(0)
dp3 r0.x, r0.xyzx, r1.yzwy
max r0.x, r0.x, r0.w
itof r0.y, l(16)
log r0.x, r0.x
mul r0.x, r0.x, r0.y
exp r0.x, r0.x  // r0.x <- S

#line 95
add r0.xyzw, r0.xxxx, r7.xyzw  // r0.x <- color.x; r0.y <- color.y; r0.z <- color.z; r0.w <- color.w

#line 98
mov o0.xyzw, r0.xyzw
ret 
// Approximately 255 instruction slots used
